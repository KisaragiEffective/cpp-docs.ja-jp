---
title: プログラムとリンケージ (C++)
ms.date: 04/09/2018
ms.assetid: a6493ba0-24e2-4c89-956e-9da1dea660cb
ms.openlocfilehash: 4f509979a293f194333e610fbdae7be9d32ec121
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "62301514"
---
# <a name="program-and-linkage-c"></a>プログラムとリンケージ (C++)

C++ プログラムでは、、*シンボル*、たとえば、この変数または関数の名前は、そのスコープ内で任意の数と宣言することができますが、1 回定義することだけです。 これは、1 つ定義規則 (ODR) です。 A*宣言*プログラムに名前が導入されています (または再が導入されています)。 A*定義*名前を紹介し、変数の場合は明示的に初期化します。 A*関数の定義*署名と、関数本体で構成されます。

宣言を次に示します。

```cpp
int i;
int f(int x);
```

これらは、定義を示します。

```cpp
int i{42};
int f(int x){ return x * i; }
```

1 つまたは複数のプログラムで構成されます*翻訳単位*します。 実装ファイル (.cpp、.cxx など) とすべてのヘッダー (.h、.hpp など) に直接または間接的に含まれる翻訳単位で構成されます。 コンパイラは、その後、リンカーは、1 つにコンパイルされた翻訳単位をマージして各翻訳単位が個別にコンパイルされた*プログラム*します。 ODR 規則に違反通常表示リンカー エラーとして同じ名前に 2 つの異なる定義がある場合は、別の翻訳単位で。

変数を複数のファイルが表示されるようにする最善の方法が一般に、ヘッダー ファイルに配置し、追加は、#、宣言が必要なすべての .cpp ファイルで include ディレクティブ。 追加することで *#include guard*宣言名は 1 回定義されるのみすることをヘッダーの内容にします。

ただし、場合によっては必要がありますをグローバル変数または .cpp ファイル内のクラスを宣言します。 その場合、オブジェクトの名前が 1 つのファイルまたはすべてのファイルだけを適用するかどうか、コンパイラとリンカーに指示してする必要があります。

## <a name="linkage-vs-scope"></a>スコープとリンケージ

概念*リンケージ*翻訳単位全体 (変数、型名および関数名) など、プログラム内でのグローバル シンボルの表示を参照します。 概念*スコープ*名前空間、クラス、または関数の本文などのブロック内で宣言されているシンボルを参照します。 このようなシンボルが定義がスコープ内でのみ表示されます。リンケージの概念は、それらには適用されません。

## <a name="external-vs-internal-linkage"></a>外部と内部リンケージ

A *free 関数*はグローバルに定義されている関数または名前空間スコープ。 非 const のグローバル変数と既定で無料の機能が*外部リンケージ*; から翻訳単位は、プログラムで表示されます。 そのため、他のグローバル オブジェクト (変数、クラスの定義など) を持たないその名前。 シンボル*内部リンケージ*または*リンケージの*が宣言されている翻訳単位内でのみ表示されません。 名前に内部リンケージがある場合は、別の翻訳単位で同じ名前があります。 クラス定義で宣言された変数か、関数本体にはリンケージがありません。

内部リンケージが明示的として宣言することである、グローバル名を強制する**static**します。 これにより、それが宣言されている同じ翻訳単位をその可視性が制限されます。 このコンテキストで**static**ローカル変数に適用されるときに異なるものを意味します。

次のオブジェクトは、既定では、内部リンケージを持ちます。
- 定数オブジェクト
- constexpr オブジェクト
- typedef
- 名前空間のスコープ内の静的オブジェクト

Const オブジェクトの外部リンケージを付与するには、宣言として**extern**し、値を割り当てます。

```cpp
extern const int value = 42;
```

参照してください[extern](extern-cpp.md)詳細についてはします。

## <a name="see-also"></a>関連項目

[基本的な概念](../cpp/basic-concepts-cpp.md)